# üîê –ù–∞—Å—Ç—Ä–æ–π–∫–∞ VLESS + REALITY –¥–ª—è Marzban

–ü–æ–ª–Ω–∞—è –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ VPN —á–µ—Ä–µ–∑ Marzban —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º –ø—Ä–æ—Ç–æ–∫–æ–ª–∞ VLESS –∏ –º–∞—Å–∫–∏—Ä–æ–≤–∫–∏ REALITY.

## üìã –û–ø–∏—Å–∞–Ω–∏–µ

–≠—Ç–æ—Ç –Ω–∞–±–æ—Ä —Å–∫—Ä–∏–ø—Ç–æ–≤ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç VLESS + REALITY –¥–ª—è Marzban –Ω–∞ –ø–æ—Ä—Ç—É 443, –ø–æ–∑–≤–æ–ª—è—è –æ–±—Ö–æ–¥–∏—Ç—å –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ —Å –º–∞—Å–∫–∏—Ä–æ–≤–∫–æ–π –ø–æ–¥ –ø–æ–ø—É–ª—è—Ä–Ω—ã–π —Å–∞–π—Ç (Microsoft).

**–í–∞–∂–Ω–æ:** –ù–∞ —Å–µ—Ä–≤–µ—Ä–µ —É–∂–µ —Ä–∞–±–æ—Ç–∞–µ—Ç TinyProxy –Ω–∞ –ø–æ—Ä—Ç—É 8080. –ü–æ—Ä—Ç 8080 –Ω–µ –∑–∞—Ç—Ä–∞–≥–∏–≤–∞–µ—Ç—Å—è.

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π)

### –í–∞—Ä–∏–∞–Ω—Ç 1: –ü–æ–ª–Ω–æ—Å—Ç—å—é –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞

1. **–°–∫–æ–ø–∏—Ä—É–π—Ç–µ —Ñ–∞–π–ª—ã –Ω–∞ –≤–∞—à VPS —Å–µ—Ä–≤–µ—Ä:**
   ```bash
   scp auto_setup_reality.sh user@37.1.212.51:~/
   ```

2. **–ü–æ–¥–∫–ª—é—á–∏—Ç–µ—Å—å –∫ —Å–µ—Ä–≤–µ—Ä—É:**
   ```bash
   ssh user@37.1.212.51
   ```

3. **–ó–∞–ø—É—Å—Ç–∏—Ç–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Å–∫—Ä–∏–ø—Ç:**
   ```bash
   chmod +x auto_setup_reality.sh
   ./auto_setup_reality.sh
   ```

   –°–∫—Ä–∏–ø—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:
   - ‚úÖ –ù–∞–π–¥–µ—Ç –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä Marzban
   - ‚úÖ –°–≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –∫–ª—é—á–∏ REALITY
   - ‚úÖ –°–æ–∑–¥–∞—Å—Ç JSON –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é
   - ‚úÖ –ü—Ä–æ–≤–µ—Ä–∏—Ç –ø–æ—Ä—Ç 443
   - ‚úÖ –ü—Ä–µ–¥–ª–æ–∂–∏—Ç –æ—Ç–∫—Ä—ã—Ç—å –ø–æ—Ä—Ç –≤ —Ñ–∞–π—Ä–≤–æ–ª–µ
   - ‚úÖ –°–æ—Ö—Ä–∞–Ω–∏—Ç –≤—Å–µ –¥–∞–Ω–Ω—ã–µ –≤ —Ñ–∞–π–ª—ã

4. **–°–∫–æ–ø–∏—Ä—É–π—Ç–µ JSON –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é** –∏–∑ –≤—ã–≤–æ–¥–∞ —Å–∫—Ä–∏–ø—Ç–∞ –∏–ª–∏ —Ñ–∞–π–ª–∞ `/tmp/marzban_reality_config.json`

5. **–í—Å—Ç–∞–≤—å—Ç–µ –≤ Marzban:**
   - –û—Ç–∫—Ä–æ–π—Ç–µ –ø–∞–Ω–µ–ª—å Marzban ‚Üí Core Settings
   - –ù–∞–π–¥–∏—Ç–µ —Ä–∞–∑–¥–µ–ª `"inbounds": [ ... ]`
   - –í—Å—Ç–∞–≤—å—Ç–µ JSON –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é
   - –°–æ—Ö—Ä–∞–Ω–∏—Ç–µ

6. **–°–æ–∑–¥–∞–π—Ç–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:**
   - Marzban ‚Üí Users ‚Üí Add User
   - Protocol: **VLESS**
   - Flow: **vision** (xtls-rprx-vision)
   - Inbound: **VLESS-Reality-Microsoft**

7. **–ü–æ–¥–∫–ª—é—á–∏—Ç–µ—Å—å —á–µ—Ä–µ–∑ Amnezia VPN:**
   - –°–∫–æ–ø–∏—Ä—É–π—Ç–µ —Å—Å—ã–ª–∫—É `vless://...` –∏–∑ Marzban
   - –û—Ç–∫—Ä–æ–π—Ç–µ Amnezia ‚Üí –î–æ–±–∞–≤–∏—Ç—å —Å–µ—Ä–≤–µ—Ä ‚Üí –ò–∑ –±—É—Ñ–µ—Ä–∞ –æ–±–º–µ–Ω–∞
   - –í—Å—Ç–∞–≤—å—Ç–µ —Å—Å—ã–ª–∫—É –∏ –ø–æ–¥–∫–ª—é—á–∏—Ç–µ—Å—å

### –í–∞—Ä–∏–∞–Ω—Ç 2: –†—É—á–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞

–ï—Å–ª–∏ –ø—Ä–µ–¥–ø–æ—á–∏—Ç–∞–µ—Ç–µ —Ä—É—á–Ω—É—é –Ω–∞—Å—Ç—Ä–æ–π–∫—É, —Å–ª–µ–¥—É–π—Ç–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è–º –≤ `QUICK_START.md` –∏–ª–∏ `MARZBAN_VLESS_REALITY.md`.

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–∞–π–ª–æ–≤

```
vpn/
‚îú‚îÄ‚îÄ README.md                      # –≠—Ç–æ—Ç —Ñ–∞–π–ª
‚îú‚îÄ‚îÄ QUICK_START.md                 # –ö—Ä–∞—Ç–∫–∞—è —à–ø–∞—Ä–≥–∞–ª–∫–∞
‚îú‚îÄ‚îÄ MARZBAN_VLESS_REALITY.md      # –ü–æ–¥—Ä–æ–±–Ω–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è
‚îú‚îÄ‚îÄ PROXY_SETTINGS.md             # –ù–∞—Å—Ç—Ä–æ–π–∫–∏ TinyProxy (–ø–æ—Ä—Ç 8080)
‚îú‚îÄ‚îÄ auto_setup_reality.sh         # üöÄ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Å–∫—Ä–∏–ø—Ç –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
‚îú‚îÄ‚îÄ apply_config.sh               # –°–∫—Ä–∏–ø—Ç –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
‚îú‚îÄ‚îÄ generate_keys.sh              # –°–∫—Ä–∏–ø—Ç –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –∫–ª—é—á–µ–π
‚îî‚îÄ‚îÄ marzban_reality_config.json   # –ì–æ—Ç–æ–≤—ã–π JSON –∫–æ–Ω—Ñ–∏–≥ (—Ç—Ä–µ–±—É–µ—Ç –∫–ª—é—á–µ–π)
```

## üîß –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Å–∫—Ä–∏–ø—Ç–æ–≤

### auto_setup_reality.sh

–ü–æ–ª–Ω–æ—Å—Ç—å—é –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Å–∫—Ä–∏–ø—Ç, –∫–æ—Ç–æ—Ä—ã–π –≤—ã–ø–æ–ª–Ω—è–µ—Ç –≤—Å–µ —à–∞–≥–∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏:

```bash
./auto_setup_reality.sh
```

**–ß—Ç–æ –¥–µ–ª–∞–µ—Ç:**
- –ù–∞—Ö–æ–¥–∏—Ç –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä Marzban
- –ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –∫–ª—é—á–∏ REALITY
- –°–æ–∑–¥–∞–µ—Ç JSON –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é —Å –∫–ª—é—á–∞–º–∏
- –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –ø–æ—Ä—Ç 443
- –ü—Ä–µ–¥–ª–∞–≥–∞–µ—Ç –æ—Ç–∫—Ä—ã—Ç—å –ø–æ—Ä—Ç –≤ —Ñ–∞–π—Ä–≤–æ–ª–µ
- –°–æ—Ö—Ä–∞–Ω—è–µ—Ç –∫–ª—é—á–∏ –∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é –≤ `/tmp/`

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
- `/tmp/marzban_reality_config.json` - –≥–æ—Ç–æ–≤–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
- `/tmp/reality_keys.txt` - —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—ã–µ –∫–ª—é—á–∏

### generate_keys.sh

–¢–æ–ª—å–∫–æ –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –∫–ª—é—á–µ–π:

```bash
./generate_keys.sh
```

### apply_config.sh

–ü–æ–ø—ã—Ç–∫–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ (–Ω–µ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è, –ª—É—á—à–µ —á–µ—Ä–µ–∑ –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å):

```bash
./apply_config.sh [–ø—É—Ç—å_–∫_–∫–æ–Ω—Ñ–∏–≥—É.json]
```

## üìù –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### –ü—Ä–∏–º–µ—Ä 1: –ü–æ–ª–Ω–∞—è –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è

```bash
# –ù–∞ –≤–∞—à–µ–º –∫–æ–º–ø—å—é—Ç–µ—Ä–µ
scp auto_setup_reality.sh root@37.1.212.51:/root/

# –ù–∞ —Å–µ—Ä–≤–µ—Ä–µ
ssh root@37.1.212.51
cd /root
chmod +x auto_setup_reality.sh
./auto_setup_reality.sh

# –°–∫–æ–ø–∏—Ä—É–π—Ç–µ JSON –∏–∑ –≤—ã–≤–æ–¥–∞ –∏–ª–∏ —Ñ–∞–π–ª–∞ /tmp/marzban_reality_config.json
# –í—Å—Ç–∞–≤—å—Ç–µ –≤ Marzban ‚Üí Core Settings ‚Üí inbounds
```

### –ü—Ä–∏–º–µ—Ä 2: –¢–æ–ª—å–∫–æ –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –∫–ª—é—á–µ–π

```bash
# –ù–∞ —Å–µ—Ä–≤–µ—Ä–µ
./generate_keys.sh

# –°–∫–æ–ø–∏—Ä—É–π—Ç–µ –∫–ª—é—á–∏
# –û—Ç–∫—Ä–æ–π—Ç–µ marzban_reality_config.json
# –ó–∞–º–µ–Ω–∏—Ç–µ –ø–ª–µ–π—Å—Ö–æ–ª–¥–µ—Ä—ã –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã–µ –∫–ª—é—á–∏
# –í—Å—Ç–∞–≤—å—Ç–µ –≤ Marzban
```

## üîç –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ—Ä—Ç–∞ 443

```bash
sudo netstat -tlnp | grep 443
# –∏–ª–∏
sudo ss -tlnp | grep 443
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–æ–≥–æ–≤ Marzban

```bash
docker logs marzban -f
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è

1. –ü–æ–¥–∫–ª—é—á–∏—Ç–µ—Å—å —á–µ—Ä–µ–∑ Amnezia VPN
2. –û—Ç–∫—Ä–æ–π—Ç–µ https://ip-api.com
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ IP –∏–∑–º–µ–Ω–∏–ª—Å—è –Ω–∞ IP –≤–∞—à–µ–≥–æ —Å–µ—Ä–≤–µ—Ä–∞ (37.1.212.51)

## ‚ö†Ô∏è –í–∞–∂–Ω—ã–µ –∑–∞–º–µ—á–∞–Ω–∏—è

1. **–ü–æ—Ä—Ç 8080 (TinyProxy)** –Ω–µ –∑–∞—Ç—Ä–∞–≥–∏–≤–∞–µ—Ç—Å—è ‚Äî —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ
2. **–ü–æ—Ä—Ç 443** –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –¥–ª—è VLESS + REALITY
3. **–ö–ª—é—á–∏ REALITY** –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –æ–¥–∏–Ω–∞–∫–æ–≤—ã–º–∏ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ –∏ –≤ –∫–ª–∏–µ–Ω—Ç–µ
4. **SNI** –¥–æ–ª–∂–µ–Ω —Å–æ–≤–ø–∞–¥–∞—Ç—å —Å –¥–æ–º–µ–Ω–æ–º –≤ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ (www.microsoft.com)

## üõ†Ô∏è –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –Ω–µ–ø–æ–ª–∞–¥–æ–∫

### –ü—Ä–æ–±–ª–µ–º–∞: –°–∫—Ä–∏–ø—Ç –Ω–µ –Ω–∞—Ö–æ–¥–∏—Ç –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä Marzban

**–†–µ—à–µ–Ω–∏–µ:**
```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∏–º—è –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞
docker ps

# –ï—Å–ª–∏ –∏–º—è –æ—Ç–ª–∏—á–∞–µ—Ç—Å—è, –æ—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ —Å–∫—Ä–∏–ø—Ç –∏–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ:
docker exec -it –ò–ú–Ø_–ö–û–ù–¢–ï–ô–ù–ï–†–ê xray x25519
```

### –ü—Ä–æ–±–ª–µ–º–∞: –ü–æ—Ä—Ç 443 –∑–∞–Ω—è—Ç

**–†–µ—à–µ–Ω–∏–µ:**
```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –∑–∞–Ω–∏–º–∞–µ—Ç –ø–æ—Ä—Ç
sudo lsof -i :443

# –ï—Å–ª–∏ —ç—Ç–æ —Å—Ç–∞—Ä—ã–π –∫–æ–Ω—Ñ–∏–≥ Marzban, —É–¥–∞–ª–∏—Ç–µ –µ–≥–æ –∏–∑ inbounds
# –ï—Å–ª–∏ –¥—Ä—É–≥–æ–π —Å–µ—Ä–≤–∏—Å, –æ—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –µ–≥–æ –∏–ª–∏ –∏–∑–º–µ–Ω–∏—Ç–µ –ø–æ—Ä—Ç
```

### –ü—Ä–æ–±–ª–µ–º–∞: –ù–µ –ø–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è —á–µ—Ä–µ–∑ Amnezia

**–ü—Ä–æ–≤–µ—Ä—å—Ç–µ:**
1. –ü—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç—å Public Key –≤ —Å—Å—ã–ª–∫–µ `vless://`
2. –ü—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç—å SNI (–¥–æ–ª–∂–µ–Ω –±—ã—Ç—å www.microsoft.com)
3. –ü—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç—å Flow (xtls-rprx-vision)
4. –û—Ç–∫—Ä—ã—Ç –ª–∏ –ø–æ—Ä—Ç 443 –≤ —Ñ–∞–π—Ä–≤–æ–ª–µ:
   ```bash
   sudo ufw allow 443/tcp
   # –∏–ª–∏
   sudo firewall-cmd --add-port=443/tcp --permanent
   sudo firewall-cmd --reload
   ```

## üìö –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

- **QUICK_START.md** - –ö—Ä–∞—Ç–∫–∞—è —à–ø–∞—Ä–≥–∞–ª–∫–∞ –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ —Å—Ç–∞—Ä—Ç–∞
- **MARZBAN_VLESS_REALITY.md** - –ü–æ–¥—Ä–æ–±–Ω–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è —Å –æ–±—ä—è—Å–Ω–µ–Ω–∏—è–º–∏
- **PROXY_SETTINGS.md** - –ù–∞—Å—Ç—Ä–æ–π–∫–∏ TinyProxy (–ø–æ—Ä—Ç 8080)

## üîó –ü–æ–ª–µ–∑–Ω—ã–µ —Å—Å—ã–ª–∫–∏

- [–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è Marzban](https://github.com/Gozargah/Marzban)
- [–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è Xray](https://xtls.github.io/)
- [Amnezia VPN](https://github.com/amnezia-vpn/amnezia-client)

---

**–£—Å–ø–µ—à–Ω–æ–π –Ω–∞—Å—Ç—Ä–æ–π–∫–∏! üöÄ**
