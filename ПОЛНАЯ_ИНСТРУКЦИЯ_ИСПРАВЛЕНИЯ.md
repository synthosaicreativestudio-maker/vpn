# üîß –ü–æ–ª–Ω–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è: –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–∏—Ç—É–∞—Ü–∏–∏ —Å —Å–µ—Ä–≤–µ—Ä–æ–º 37.1.212.51

**–ü–æ—à–∞–≥–æ–≤–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –¥–ª—è –∑–∞—â–∏—Ç—ã —Å–µ—Ä–≤–µ—Ä–∞ –æ—Ç –Ω–µ—Å–∞–Ω–∫—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è**

---

## üìã –ü–û–î–ì–û–¢–û–í–ö–ê

### –®–ê–ì 0: –£–∑–Ω–∞—Ç—å —Å–≤–æ–π IP –∞–¥—Ä–µ—Å

1. –û—Ç–∫—Ä–æ–π—Ç–µ –±—Ä–∞—É–∑–µ—Ä –Ω–∞ –≤–∞—à–µ–º Mac
2. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞: **https://ifconfig.me**
3. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ —Ü–∏—Ñ—Ä—ã, –∫–æ—Ç–æ—Ä—ã–µ —É–≤–∏–¥–∏—Ç–µ (–Ω–∞–ø—Ä–∏–º–µ—Ä: `123.45.67.89`)
4. **–ó–ê–ü–ò–®–ò–¢–ï –≠–¢–û–¢ IP** - –æ–Ω –ø–æ–Ω–∞–¥–æ–±–∏—Ç—Å—è –≤ –®–ê–ì–ï 3

**–í—Ä–µ–º—è:** 1 –º–∏–Ω—É—Ç–∞

---

## üîê –í–´–ü–û–õ–ù–ï–ù–ò–ï –®–ê–ì–û–í

### –®–ê–ì 1: –ü–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –∫ —Å–µ—Ä–≤–µ—Ä—É

1. –û—Ç–∫—Ä–æ–π—Ç–µ **–¢–µ—Ä–º–∏–Ω–∞–ª** –Ω–∞ Mac:
   - –ù–∞–∂–º–∏—Ç–µ `Cmd + Space` (Spotlight)
   - –í–≤–µ–¥–∏—Ç–µ "–¢–µ—Ä–º–∏–Ω–∞–ª"
   - –ù–∞–∂–º–∏—Ç–µ Enter

2. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ –∏ –≤—Å—Ç–∞–≤—å—Ç–µ —ç—Ç—É –∫–æ–º–∞–Ω–¥—É:
   ```bash
   ssh root@37.1.212.51
   ```
   –ù–∞–∂–º–∏—Ç–µ Enter

3. –ö–æ–≥–¥–∞ –ø–æ–ø—Ä–æ—Å–∏—Ç –ø–∞—Ä–æ–ª—å, –≤–≤–µ–¥–∏—Ç–µ:
   ```
   LEJ6U5chSK
   ```
   **–í–∞–∂–Ω–æ:** –ü–∞—Ä–æ–ª—å –Ω–µ –±—É–¥–µ—Ç –≤–∏–¥–µ–Ω –ø—Ä–∏ –≤–≤–æ–¥–µ - —ç—Ç–æ –Ω–æ—Ä–º–∞–ª—å–Ω–æ!
   –ù–∞–∂–º–∏—Ç–µ Enter

4. –ï—Å–ª–∏ –≤—Å–µ –ø—Ä–∞–≤–∏–ª—å–Ω–æ, –≤—ã —É–≤–∏–¥–∏—Ç–µ —Å—Ç—Ä–æ–∫—É —Ç–∏–ø–∞:
   ```
   root@...:~#
   ```
   –≠—Ç–æ –∑–Ω–∞—á–∏—Ç, –≤—ã —É—Å–ø–µ—à–Ω–æ –ø–æ–¥–∫–ª—é—á–∏–ª–∏—Å—å –∫ —Å–µ—Ä–≤–µ—Ä—É.

**–í—Ä–µ–º—è:** 1 –º–∏–Ω—É—Ç–∞

---

### –®–ê–ì 2: –°–æ–∑–¥–∞—Ç—å —Ä–µ–∑–µ—Ä–≤–Ω—É—é –∫–æ–ø–∏—é –Ω–∞—Å—Ç—Ä–æ–µ–∫ (–Ω–∞ –≤—Å—è–∫–∏–π —Å–ª—É—á–∞–π)

**–í—ã–ø–æ–ª–Ω–∏—Ç–µ —ç—Ç–∏ –∫–æ–º–∞–Ω–¥—ã –ø–æ –æ—á–µ—Ä–µ–¥–∏** (–∫–∞–∂–¥—É—é –Ω–∞ –Ω–æ–≤–æ–π —Å—Ç—Ä–æ–∫–µ, –Ω–∞–∂–∏–º–∞—è Enter):

```bash
cp /etc/tinyproxy/tinyproxy.conf /etc/tinyproxy/tinyproxy.conf.backup.$(date +%Y%m%d)
```

```bash
echo "‚úÖ –†–µ–∑–µ—Ä–≤–Ω–∞—è –∫–æ–ø–∏—è —Å–æ–∑–¥–∞–Ω–∞: /etc/tinyproxy/tinyproxy.conf.backup.$(date +%Y%m%d)"
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** –ï—Å–ª–∏ —á—Ç–æ-—Ç–æ –ø–æ–π–¥–µ—Ç –Ω–µ —Ç–∞–∫, –º–æ–∂–Ω–æ –±—É–¥–µ—Ç –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏.

**–í—Ä–µ–º—è:** 30 —Å–µ–∫—É–Ω–¥

---

### –®–ê–ì 3: –ó–∞–∫—Ä—ã—Ç—å –¥–æ—Å—Ç—É–ø –∫ –ø—Ä–æ–∫—Å–∏ –¥–ª—è –≤—Å–µ—Ö, –∫—Ä–æ–º–µ –≤–∞—Å

**‚ö†Ô∏è –í–ê–ñ–ù–û:** –ó–∞–º–µ–Ω–∏—Ç–µ `–í–ê–®_IP` –Ω–∞ IP –∞–¥—Ä–µ—Å –∏–∑ –®–ê–ì–ê 0!

**–ü—Ä–∏–º–µ—Ä:** –ï—Å–ª–∏ –≤–∞—à IP –±—ã–ª `123.45.67.89`, —Ç–æ –∫–æ–º–∞–Ω–¥–∞ –±—É–¥–µ—Ç:
```bash
ufw allow from 123.45.67.89 to any port 8080 proto tcp comment "TinyProxy access"
```

**–í—ã–ø–æ–ª–Ω–∏—Ç–µ –∫–æ–º–∞–Ω–¥—ã –ø–æ –æ—á–µ—Ä–µ–¥–∏:**

```bash
ufw allow from –í–ê–®_IP to any port 8080 proto tcp comment "TinyProxy access"
```
(–ó–∞–º–µ–Ω–∏—Ç–µ `–í–ê–®_IP` –Ω–∞ –≤–∞—à —Ä–µ–∞–ª—å–Ω—ã–π IP, –Ω–∞–∂–º–∏—Ç–µ Enter)

```bash
ufw deny 8080/tcp
```
(–ù–∞–∂–º–∏—Ç–µ Enter)

```bash
ufw reload
```
(–ù–∞–∂–º–∏—Ç–µ Enter)

**–ü—Ä–æ–≤–µ—Ä–∫–∞:**
```bash
ufw status | grep 8080
```
(–î–æ–ª–∂–Ω—ã —É–≤–∏–¥–µ—Ç—å –¥–≤–µ —Å—Ç—Ä–æ–∫–∏: –æ–¥–Ω—É —Å `ALLOW` –¥–ª—è –≤–∞—à–µ–≥–æ IP, –¥—Ä—É–≥—É—é —Å `DENY`)

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** –¢–µ–ø–µ—Ä—å —Ç–æ–ª—å–∫–æ –≤—ã –º–æ–∂–µ—Ç–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø—Ä–æ–∫—Å–∏ –Ω–∞ –ø–æ—Ä—Ç—É 8080.

**–í—Ä–µ–º—è:** 2 –º–∏–Ω—É—Ç—ã

---

### –®–ê–ì 4: –û–≥—Ä–∞–Ω–∏—á–∏—Ç—å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–π (–º–∞–∫—Å–∏–º—É–º 20)

1. –û—Ç–∫—Ä–æ–π—Ç–µ —Ñ–∞–π–ª —Å –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏ TinyProxy:
   ```bash
   nano /etc/tinyproxy/tinyproxy.conf
   ```
   –ù–∞–∂–º–∏—Ç–µ Enter

2. –í —Ä–µ–¥–∞–∫—Ç–æ—Ä–µ –Ω–∞–π–¥–∏—Ç–µ —Å—Ç—Ä–æ–∫—É —Å `MaxClients`:
   - –ú–æ–∂–µ—Ç –±—ã—Ç—å: `#MaxClients 100`
   - –ò–ª–∏: `MaxClients 100`
   - –ò–ª–∏ —Å—Ç—Ä–æ–∫–∞ –º–æ–∂–µ—Ç –æ—Ç—Å—É—Ç—Å—Ç–≤–æ–≤–∞—Ç—å

3. **–ö–∞–∫ –Ω–∞–π—Ç–∏:**
   - –ù–∞–∂–º–∏—Ç–µ `Ctrl + W` (–ø–æ–∏—Å–∫)
   - –í–≤–µ–¥–∏—Ç–µ: `MaxClients`
   - –ù–∞–∂–º–∏—Ç–µ Enter

4. **–ï—Å–ª–∏ –Ω–∞—à–ª–∏ —Å—Ç—Ä–æ–∫—É:**
   - –£–¥–∞–ª–∏—Ç–µ —Å–∏–º–≤–æ–ª `#` –≤ –Ω–∞—á–∞–ª–µ (–µ—Å–ª–∏ –æ–Ω –µ—Å—Ç—å)
   - –ò–∑–º–µ–Ω–∏—Ç–µ —á–∏—Å–ª–æ –Ω–∞ `20`
   - –î–æ–ª–∂–Ω–æ –ø–æ–ª—É—á–∏—Ç—å—Å—è: `MaxClients 20`

5. **–ï—Å–ª–∏ —Å—Ç—Ä–æ–∫–∞ –Ω–µ –Ω–∞–π–¥–µ–Ω–∞:**
   - –ù–∞–∂–º–∏—Ç–µ `Ctrl + End` (–ø–µ—Ä–µ–π—Ç–∏ –≤ –∫–æ–Ω–µ—Ü —Ñ–∞–π–ª–∞)
   - –î–æ–±–∞–≤—å—Ç–µ –Ω–æ–≤—É—é —Å—Ç—Ä–æ–∫—É: `MaxClients 20`

6. –°–æ—Ö—Ä–∞–Ω–∏—Ç–µ —Ñ–∞–π–ª:
   - –ù–∞–∂–º–∏—Ç–µ `Ctrl + O` (—Å–æ—Ö—Ä–∞–Ω–∏—Ç—å)
   - –ù–∞–∂–º–∏—Ç–µ Enter
   - –ù–∞–∂–º–∏—Ç–µ `Ctrl + X` (–≤—ã–π—Ç–∏)

7. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ TinyProxy:
   ```bash
   systemctl restart tinyproxy
   ```
   –ù–∞–∂–º–∏—Ç–µ Enter

8. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—Ç–∞—Ç—É—Å:
   ```bash
   systemctl status tinyproxy --no-pager | head -10
   ```
   (–î–æ–ª–∂–Ω–æ –ø–æ–∫–∞–∑–∞—Ç—å "active (running)")

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** –ü—Ä–æ–∫—Å–∏ –Ω–µ –±—É–¥–µ—Ç –ø—Ä–∏–Ω–∏–º–∞—Ç—å –±–æ–ª—å—à–µ 20 –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–π –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ.

**–í—Ä–µ–º—è:** 3 –º–∏–Ω—É—Ç—ã

---

### –®–ê–ì 5: –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∑–∞—â–∏—Ç—É –æ—Ç –∞—Ç–∞–∫ (fail2ban)

**–í—ã–ø–æ–ª–Ω–∏—Ç–µ –∫–æ–º–∞–Ω–¥—ã –ø–æ –æ—á–µ—Ä–µ–¥–∏:**

1. –û–±–Ω–æ–≤–∏—Ç—å —Å–ø–∏—Å–æ–∫ –ø–∞–∫–µ—Ç–æ–≤:
   ```bash
   apt-get update
   ```
   –ù–∞–∂–º–∏—Ç–µ Enter, –ø–æ–¥–æ–∂–¥–∏—Ç–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è (–º–æ–∂–µ—Ç –∑–∞–Ω—è—Ç—å 1-2 –º–∏–Ω—É—Ç—ã)

2. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å fail2ban:
   ```bash
   apt-get install fail2ban -y
   ```
   –ù–∞–∂–º–∏—Ç–µ Enter, –ø–æ–¥–æ–∂–¥–∏—Ç–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è
   - –ï—Å–ª–∏ —Å–ø—Ä–æ—Å–∏—Ç –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ, –≤–≤–µ–¥–∏—Ç–µ `Y` –∏ –Ω–∞–∂–º–∏—Ç–µ Enter

3. –°–æ–∑–¥–∞—Ç—å —Ñ–∞–π–ª –Ω–∞—Å—Ç—Ä–æ–µ–∫ –¥–ª—è TinyProxy:
   ```bash
   cat > /etc/fail2ban/jail.d/tinyproxy.conf << 'EOF'
   [tinyproxy]
   enabled = true
   port = 8080
   filter = tinyproxy
   logpath = /var/log/tinyproxy/tinyproxy.log
   maxretry = 3
   bantime = 3600
   findtime = 600
   EOF
   ```
   –ù–∞–∂–º–∏—Ç–µ Enter

4. –°–æ–∑–¥–∞—Ç—å —Ñ–∏–ª—å—Ç—Ä –¥–ª—è TinyProxy:
   ```bash
   cat > /etc/fail2ban/filter.d/tinyproxy.conf << 'EOF'
   [Definition]
   failregex = ^.*\[WARNING\].*Connection from <HOST> refused.*$
               ^.*\[ERROR\].*Connection from <HOST> failed.*$
   ignoreregex =
   EOF
   ```
   –ù–∞–∂–º–∏—Ç–µ Enter

5. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å fail2ban:
   ```bash
   systemctl restart fail2ban
   ```
   –ù–∞–∂–º–∏—Ç–µ Enter

6. –í–∫–ª—é—á–∏—Ç—å –∞–≤—Ç–æ–∑–∞–ø—É—Å–∫ fail2ban:
   ```bash
   systemctl enable fail2ban
   ```
   –ù–∞–∂–º–∏—Ç–µ Enter

7. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å:
   ```bash
   fail2ban-client status tinyproxy
   ```
   (–î–æ–ª–∂–Ω–æ –ø–æ–∫–∞–∑–∞—Ç—å "Status: Active")

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** –ü–æ–¥–æ–∑—Ä–∏—Ç–µ–ª—å–Ω—ã–µ IP –±—É–¥—É—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å—Å—è –Ω–∞ 1 —á–∞—Å –ø–æ—Å–ª–µ 3 –Ω–µ—É–¥–∞—á–Ω—ã—Ö –ø–æ–ø—ã—Ç–æ–∫.

**–í—Ä–µ–º—è:** 5 –º–∏–Ω—É—Ç

---

### –®–ê–ì 6: –û–≥—Ä–∞–Ω–∏—á–∏—Ç—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø–∞–º—è—Ç–∏ (–º–∞–∫—Å–∏–º—É–º 512 –ú–ë)

1. –û—Ç–∫—Ä—ã—Ç—å —Ä–µ–¥–∞–∫—Ç–æ—Ä –Ω–∞—Å—Ç—Ä–æ–µ–∫ —Å–ª—É–∂–±—ã TinyProxy:
   ```bash
   systemctl edit tinyproxy
   ```
   –ù–∞–∂–º–∏—Ç–µ Enter

2. –í –æ—Ç–∫—Ä—ã–≤—à–µ–º—Å—è —Ä–µ–¥–∞–∫—Ç–æ—Ä–µ –≤—Å—Ç–∞–≤—å—Ç–µ —ç—Ç–∏ —Å—Ç—Ä–æ–∫–∏:
   ```
   [Service]
   MemoryLimit=512M
   CPUQuota=50%
   TasksMax=50
   ```
   **–ö–∞–∫ –≤—Å—Ç–∞–≤–∏—Ç—å:**
   - –ù–∞–∂–º–∏—Ç–µ –ø—Ä–∞–≤—É—é –∫–Ω–æ–ø–∫—É –º—ã—à–∏ –≤ —Ä–µ–¥–∞–∫—Ç–æ—Ä–µ
   - –ò–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ `Cmd + V` (–µ—Å–ª–∏ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è)
   - –ò–ª–∏ –≤–≤–µ–¥–∏—Ç–µ –≤—Ä—É—á–Ω—É—é

3. –°–æ—Ö—Ä–∞–Ω–∏—Ç–µ —Ñ–∞–π–ª:
   - –ù–∞–∂–º–∏—Ç–µ `Ctrl + O` (—Å–æ—Ö—Ä–∞–Ω–∏—Ç—å)
   - –ù–∞–∂–º–∏—Ç–µ Enter
   - –ù–∞–∂–º–∏—Ç–µ `Ctrl + X` (–≤—ã–π—Ç–∏)

4. –ü—Ä–∏–º–µ–Ω–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è:
   ```bash
   systemctl daemon-reload
   ```
   –ù–∞–∂–º–∏—Ç–µ Enter

5. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å TinyProxy:
   ```bash
   systemctl restart tinyproxy
   ```
   –ù–∞–∂–º–∏—Ç–µ Enter

6. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å:
   ```bash
   systemctl status tinyproxy --no-pager | head -10
   ```
   (–î–æ–ª–∂–Ω–æ –ø–æ–∫–∞–∑–∞—Ç—å "active (running)")

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** TinyProxy –Ω–µ –±—É–¥–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –±–æ–ª—å—à–µ 512 –ú–ë –ø–∞–º—è—Ç–∏.

**–í—Ä–µ–º—è:** 3 –º–∏–Ω—É—Ç—ã

---

### –®–ê–ì 7: –í–∫–ª—é—á–∏—Ç—å –¥–µ—Ç–∞–ª—å–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

1. –û—Ç–∫—Ä—ã—Ç—å —Ñ–∞–π–ª –Ω–∞—Å—Ç—Ä–æ–µ–∫:
   ```bash
   nano /etc/tinyproxy/tinyproxy.conf
   ```
   –ù–∞–∂–º–∏—Ç–µ Enter

2. –ù–∞–π—Ç–∏ —Å—Ç—Ä–æ–∫–∏ (–∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ `Ctrl + W` –¥–ª—è –ø–æ–∏—Å–∫–∞):
   - `LogLevel`
   - `LogFile`
   - `StatFile`

3. –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —Ç–∞–∫–∏–µ:
   ```
   LogLevel Info
   LogFile /var/log/tinyproxy/tinyproxy.log
   StatFile /var/log/tinyproxy/tinyproxy.stats
   ```

4. –ï—Å–ª–∏ —Å—Ç—Ä–æ–∫ –Ω–µ—Ç –∏–ª–∏ –æ–Ω–∏ –∑–∞–∫–æ–º–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω—ã (`#` –≤ –Ω–∞—á–∞–ª–µ):
   - –£–¥–∞–ª–∏—Ç–µ `#` –µ—Å–ª–∏ –µ—Å—Ç—å
   - –ò–ª–∏ –¥–æ–±–∞–≤—å—Ç–µ —Å—Ç—Ä–æ–∫–∏ –≤ –∫–æ–Ω–µ—Ü —Ñ–∞–π–ª–∞

5. –°–æ—Ö—Ä–∞–Ω–∏—Ç–µ —Ñ–∞–π–ª:
   - `Ctrl + O`, Enter, `Ctrl + X`

6. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å TinyProxy:
   ```bash
   systemctl restart tinyproxy
   ```
   –ù–∞–∂–º–∏—Ç–µ Enter

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** –í—Å–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –±—É–¥—É—Ç –∑–∞–ø–∏—Å—ã–≤–∞—Ç—å—Å—è –≤ –ª–æ–≥ –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞.

**–í—Ä–µ–º—è:** 2 –º–∏–Ω—É—Ç—ã

---

### –®–ê–ì 8: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ –≤—Å–µ —Ä–∞–±–æ—Ç–∞–µ—Ç

**–í—ã–ø–æ–ª–Ω–∏—Ç–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø–æ –æ—á–µ—Ä–µ–¥–∏:**

1. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–π –∫ –ø—Ä–æ–∫—Å–∏:**
   ```bash
   ss -tn | grep :8080 | wc -l
   ```
   **–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:** –ß–∏—Å–ª–æ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –º–µ–Ω—å—à–µ 20
   - ‚úÖ –ï—Å–ª–∏ < 20 - –æ—Ç–ª–∏—á–Ω–æ!
   - ‚ö†Ô∏è –ï—Å–ª–∏ 20-30 - –Ω–æ—Ä–º–∞–ª—å–Ω–æ, –Ω–æ –Ω–∞ –ø—Ä–µ–¥–µ–ª–µ
   - ‚ùå –ï—Å–ª–∏ > 30 - –ø–æ–¥–æ–∂–¥–∏—Ç–µ 5 –º–∏–Ω—É—Ç –∏ –ø—Ä–æ–≤–µ—Ä—å—Ç–µ —Å–Ω–æ–≤–∞

2. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø–∞–º—è—Ç–∏:**
   ```bash
   free -h
   ```
   **–ù–∞ —á—Ç–æ —Å–º–æ—Ç—Ä–µ—Ç—å:**
   - –°—Ç—Ä–æ–∫–∞ "Mem:" ‚Üí –∫–æ–ª–æ–Ω–∫–∞ "used"
   - ‚úÖ –ï—Å–ª–∏ < 800 –ú–ë (80%) - –æ—Ç–ª–∏—á–Ω–æ!
   - ‚ö†Ô∏è –ï—Å–ª–∏ 800-900 –ú–ë (80-90%) - –Ω–æ—Ä–º–∞–ª—å–Ω–æ, –Ω–æ —Å–ª–µ–¥–∏—Ç–µ
   - ‚ùå –ï—Å–ª–∏ > 900 –ú–ë (> 90%) - –ø—Ä–æ–±–ª–µ–º–∞, –Ω—É–∂–Ω–æ —É–≤–µ–ª–∏—á–∏—Ç—å RAM

3. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ Swap:**
   ```bash
   free -h | grep Swap
   ```
   **–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
   - ‚úÖ –ï—Å–ª–∏ "used" < 50 –ú–ë - –æ—Ç–ª–∏—á–Ω–æ!
   - ‚ö†Ô∏è –ï—Å–ª–∏ 50-200 –ú–ë - –Ω–æ—Ä–º–∞–ª—å–Ω–æ, –Ω–æ —Å–ª–µ–¥–∏—Ç–µ
   - ‚ùå –ï—Å–ª–∏ > 200 –ú–ë - –ø—Ä–æ–±–ª–µ–º–∞

4. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å fail2ban:**
   ```bash
   fail2ban-client status tinyproxy
   ```
   **–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
   - ‚úÖ –î–æ–ª–∂–Ω–æ –ø–æ–∫–∞–∑–∞—Ç—å "Status: Active"
   - ‚úÖ "Currently banned: X" - –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ IP

5. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å TinyProxy:**
   ```bash
   systemctl status tinyproxy --no-pager | head -15
   ```
   **–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
   - ‚úÖ "Active: active (running)"
   - ‚úÖ –ù–µ—Ç –æ—à–∏–±–æ–∫

6. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø—Ä–∞–≤–∏–ª–∞ UFW:**
   ```bash
   ufw status | grep 8080
   ```
   **–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
   - ‚úÖ –î–æ–ª–∂–Ω—ã –±—ã—Ç—å –¥–≤–µ —Å—Ç—Ä–æ–∫–∏: –æ–¥–Ω–∞ —Å `ALLOW` –¥–ª—è –≤–∞—à–µ–≥–æ IP, –¥—Ä—É–≥–∞—è —Å `DENY`

7. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å, –∫—Ç–æ –ø–æ–¥–∫–ª—é—á–µ–Ω (—Ç–æ–ø 5 IP):**
   ```bash
   ss -tn | grep :8080 | awk '{print $5}' | cut -d: -f1 | sort | uniq -c | sort -rn | head -5
   ```
   **–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
   - ‚úÖ –î–æ–ª–∂–µ–Ω –±—ã—Ç—å —Ç–æ–ª—å–∫–æ –≤–∞—à IP (–∏–ª–∏ IP –≤–∞—à–µ–≥–æ –±–æ—Ç–∞)
   - ‚ùå –ï—Å–ª–∏ –≤–∏–¥–Ω—ã –Ω–µ–∑–Ω–∞–∫–æ–º—ã–µ IP - –æ–Ω–∏ –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω—ã fail2ban

**–í—Ä–µ–º—è:** 3 –º–∏–Ω—É—Ç—ã

---

### –®–ê–ì 9: –°–æ–∑–¥–∞—Ç—å —Å–∫—Ä–∏–ø—Ç –¥–ª—è –±—ã—Å—Ç—Ä–æ–π –ø—Ä–æ–≤–µ—Ä–∫–∏

**–°–æ–∑–¥–∞–π—Ç–µ —Å–∫—Ä–∏–ø—Ç –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞:**

```bash
cat > /usr/local/bin/check-proxy-status.sh << 'EOF'
#!/bin/bash
echo "=========================================="
echo "üìä –°—Ç–∞—Ç—É—Å –ø—Ä–æ–∫—Å–∏-—Å–µ—Ä–≤–µ—Ä–∞"
echo "=========================================="
echo ""
echo "üîå –ü–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ –ø–æ—Ä—Ç—É 8080:"
CONNECTIONS=$(ss -tn | grep :8080 | wc -l)
echo "   –í—Å–µ–≥–æ: $CONNECTIONS"
if [ $CONNECTIONS -lt 20 ]; then
    echo "   ‚úÖ –ù–æ—Ä–º–∞–ª—å–Ω–æ (< 20)"
elif [ $CONNECTIONS -lt 50 ]; then
    echo "   ‚ö†Ô∏è  –ú–Ω–æ–≥–æ (20-50)"
else
    echo "   ‚ùå –°–ª–∏—à–∫–æ–º –º–Ω–æ–≥–æ (> 50)"
fi
echo ""
echo "üåê –¢–æ–ø 5 IP –ø–æ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è–º:"
ss -tn | grep :8080 | awk '{print $5}' | cut -d: -f1 | sort | uniq -c | sort -rn | head -5
echo ""
echo "üíæ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø–∞–º—è—Ç–∏:"
free -h | grep Mem | awk '{printf "   –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–æ: %s / %s (%.0f%%)\n", $3, $2, $3/$2*100}'
echo ""
echo "üíø –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ Swap:"
free -h | grep Swap | awk '{printf "   –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–æ: %s\n", $3}'
echo ""
echo "üõ°Ô∏è  –°—Ç–∞—Ç—É—Å fail2ban:"
fail2ban-client status tinyproxy 2>/dev/null | grep -E "(Status|Currently banned)" || echo "   fail2ban –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω"
echo ""
echo "=========================================="
EOF
```

```bash
chmod +x /usr/local/bin/check-proxy-status.sh
```

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –≤ –±—É–¥—É—â–µ–º:**
```bash
check-proxy-status.sh
```

**–í—Ä–µ–º—è:** 1 –º–∏–Ω—É—Ç–∞

---

### –®–ê–ì 10: –í—ã–π—Ç–∏ —Å —Å–µ—Ä–≤–µ—Ä–∞

```bash
exit
```
–ù–∞–∂–º–∏—Ç–µ Enter

**–í—Ä–µ–º—è:** 5 —Å–µ–∫—É–Ω–¥

---

## ‚úÖ –ò–¢–û–ì–û: –ß—Ç–æ —Å–¥–µ–ª–∞–Ω–æ

–ü–æ—Å–ª–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –≤—Å–µ—Ö —à–∞–≥–æ–≤:

- ‚úÖ **–î–æ—Å—Ç—É–ø –∫ –ø—Ä–æ–∫—Å–∏ –∑–∞–∫—Ä—ã—Ç** –¥–ª—è –≤—Å–µ—Ö, –∫—Ä–æ–º–µ –≤–∞—Å
- ‚úÖ **–û–≥—Ä–∞–Ω–∏—á–µ–Ω–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–π** (–º–∞–∫—Å–∏–º—É–º 20)
- ‚úÖ **–£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞ –∑–∞—â–∏—Ç–∞ –æ—Ç –∞—Ç–∞–∫** (fail2ban)
- ‚úÖ **–û–≥—Ä–∞–Ω–∏—á–µ–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø–∞–º—è—Ç–∏** (–º–∞–∫—Å–∏–º—É–º 512 –ú–ë)
- ‚úÖ **–í–∫–ª—é—á–µ–Ω–æ –¥–µ—Ç–∞–ª—å–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ**
- ‚úÖ **–°–æ–∑–¥–∞–Ω —Å–∫—Ä–∏–ø—Ç –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞**

---

## üìä –û–∂–∏–¥–∞–µ–º—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã

### –î–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:
- ‚ùå 332+ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ –ø—Ä–æ–∫—Å–∏
- ‚ùå –ü–∞–º—è—Ç—å: 100% (–≤—Å–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–æ)
- ‚ùå Swap –∞–∫—Ç–∏–≤–Ω–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è
- ‚ùå –°–µ—Ä–≤–µ—Ä —Ä–∞–±–æ—Ç–∞–µ—Ç –º–µ–¥–ª–µ–Ω–Ω–æ

### –ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:
- ‚úÖ < 20 –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–π –∫ –ø—Ä–æ–∫—Å–∏
- ‚úÖ –ü–∞–º—è—Ç—å: 60-80% (600-800 –ú–ë)
- ‚úÖ Swap –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∏–ª–∏ –º–∏–Ω–∏–º–∞–ª—å–Ω–æ
- ‚úÖ –°–µ—Ä–≤–µ—Ä —Ä–∞–±–æ—Ç–∞–µ—Ç –±—ã—Å—Ç—Ä–æ

---

## üîÑ –†–µ–≥—É–ª—è—Ä–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

**–ü—Ä–æ–≤–µ—Ä—è–π—Ç–µ —Ä–∞–∑ –≤ –¥–µ–Ω—å –∏–ª–∏ —Ä–∞–∑ –≤ –Ω–µ–¥–µ–ª—é:**

1. –ü–æ–¥–∫–ª—é—á–∏—Ç–µ—Å—å –∫ —Å–µ—Ä–≤–µ—Ä—É:
   ```bash
   ssh root@37.1.212.51
   ```

2. –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å–∫—Ä–∏–ø—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏:
   ```bash
   check-proxy-status.sh
   ```

3. –í—ã–π–¥–∏—Ç–µ:
   ```bash
   exit
   ```

**–í—Ä–µ–º—è:** 2 –º–∏–Ω—É—Ç—ã

---

## ‚ö†Ô∏è –í–ê–ñ–ù–´–ï –ó–ê–ú–ï–ß–ê–ù–ò–Ø

### 1. –ï—Å–ª–∏ –≤–∞—à IP –º–µ–Ω—è–µ—Ç—Å—è (–¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–π IP)
–ï—Å–ª–∏ –≤–∞—à –∏–Ω—Ç–µ—Ä–Ω–µ—Ç-–ø—Ä–æ–≤–∞–π–¥–µ—Ä –º–µ–Ω—è–µ—Ç –≤–∞—à IP –∞–¥—Ä–µ—Å, –Ω—É–∂–Ω–æ –±—É–¥–µ—Ç:
1. –£–∑–Ω–∞—Ç—å –Ω–æ–≤—ã–π IP (https://ifconfig.me)
2. –ü–æ–≤—Ç–æ—Ä–∏—Ç—å –®–ê–ì 3 —Å –Ω–æ–≤—ã–º IP
3. –ò–ª–∏ –¥–æ–±–∞–≤–∏—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ IP (–µ—Å–ª–∏ –∑–Ω–∞–µ—Ç–µ –¥–∏–∞–ø–∞–∑–æ–Ω)

### 2. –ï—Å–ª–∏ –±–æ—Ç –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –¥—Ä—É–≥–æ–π IP
–ï—Å–ª–∏ –≤–∞—à Telegram-–±–æ—Ç —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ –¥—Ä—É–≥–æ–º —Å–µ—Ä–≤–µ—Ä–µ:
1. –£–∑–Ω–∞–π—Ç–µ IP —Ç–æ–≥–æ —Å–µ—Ä–≤–µ—Ä–∞
2. –í –®–ê–ì–ï 3 –¥–æ–±–∞–≤—å—Ç–µ –æ–±–∞ IP:
   ```bash
   ufw allow from –í–ê–®_IP to any port 8080 proto tcp
   ufw allow from IP_–ë–û–¢–ê to any port 8080 proto tcp
   ```

### 3. –ï—Å–ª–∏ —á—Ç–æ-—Ç–æ –ø–æ—à–ª–æ –Ω–µ —Ç–∞–∫
–ï—Å–ª–∏ –ø–æ—Å–ª–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π —á—Ç–æ-—Ç–æ –ø–µ—Ä–µ—Å—Ç–∞–ª–æ —Ä–∞–±–æ—Ç–∞—Ç—å:

**–í–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ TinyProxy:**
```bash
cp /etc/tinyproxy/tinyproxy.conf.backup.* /etc/tinyproxy/tinyproxy.conf
systemctl restart tinyproxy
```

**–£–¥–∞–ª–∏—Ç—å –ø—Ä–∞–≤–∏–ª–∞ UFW:**
```bash
ufw delete allow from –í–ê–®_IP to any port 8080 proto tcp
ufw delete deny 8080/tcp
ufw reload
```

---

## üìù –ß–ï–ö–õ–ò–°–¢ –í–´–ü–û–õ–ù–ï–ù–ò–Ø

- [ ] –®–ê–ì 0: –£–∑–Ω–∞–ª —Å–≤–æ–π IP –∞–¥—Ä–µ—Å
- [ ] –®–ê–ì 1: –ü–æ–¥–∫–ª—é—á–∏–ª—Å—è –∫ —Å–µ—Ä–≤–µ—Ä—É
- [ ] –®–ê–ì 2: –°–æ–∑–¥–∞–ª —Ä–µ–∑–µ—Ä–≤–Ω—É—é –∫–æ–ø–∏—é
- [ ] –®–ê–ì 3: –ó–∞–∫—Ä—ã–ª –¥–æ—Å—Ç—É–ø –∫ –ø—Ä–æ–∫—Å–∏
- [ ] –®–ê–ì 4: –û–≥—Ä–∞–Ω–∏—á–∏–ª –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –¥–æ 20
- [ ] –®–ê–ì 5: –£—Å—Ç–∞–Ω–æ–≤–∏–ª fail2ban
- [ ] –®–ê–ì 6: –û–≥—Ä–∞–Ω–∏—á–∏–ª –ø–∞–º—è—Ç—å –¥–æ 512 –ú–ë
- [ ] –®–ê–ì 7: –í–∫–ª—é—á–∏–ª –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
- [ ] –®–ê–ì 8: –ü—Ä–æ–≤–µ—Ä–∏–ª, —á—Ç–æ –≤—Å–µ —Ä–∞–±–æ—Ç–∞–µ—Ç
- [ ] –®–ê–ì 9: –°–æ–∑–¥–∞–ª —Å–∫—Ä–∏–ø—Ç –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏
- [ ] –®–ê–ì 10: –í—ã—à–µ–ª —Å —Å–µ—Ä–≤–µ—Ä–∞

---

## ‚è±Ô∏è –û–ë–©–ï–ï –í–†–ï–ú–Ø

**–í—Å–µ —à–∞–≥–∏:** 20-30 –º–∏–Ω—É—Ç  
**–°–ª–æ–∂–Ω–æ—Å—Ç—å:** –ü—Ä–æ—Å—Ç–∞—è (–Ω—É–∂–Ω–æ —Ç–æ–ª—å–∫–æ –∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –∫–æ–º–∞–Ω–¥—ã)

---

## üÜò –ï—Å–ª–∏ –Ω—É–∂–Ω–∞ –ø–æ–º–æ—â—å

–ï—Å–ª–∏ —á—Ç–æ-—Ç–æ –Ω–µ –ø–æ–ª—É—á–∞–µ—Ç—Å—è:
1. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ —Ç–µ–∫—Å—Ç –æ—à–∏–±–∫–∏
2. –°–æ—Ö—Ä–∞–Ω–∏—Ç–µ –µ–≥–æ
3. –û–±—Ä–∞—Ç–∏—Ç–µ—Å—å –∑–∞ –ø–æ–º–æ—â—å—é, –ø–æ–∫–∞–∑–∞–≤ —ç—Ç–æ—Ç —Ç–µ–∫—Å—Ç

---

**–ì–æ—Ç–æ–≤—ã –Ω–∞—á–∞—Ç—å?** –ù–∞—á–Ω–∏—Ç–µ —Å –®–ê–ì–ê 0! üöÄ
